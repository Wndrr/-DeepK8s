@page "/{RequestedEntityNamespace}/Secret/{RequestedEntityName}"
@using k8s
@using k8s.Models
@using System.Text
@inherits LiveDetails<V1SecretList, V1Secret>


<EntityDetailsView Entity="@State.LastValue">
    <Specifications>
        @if (State.LastValue.Data != null)
        {
            <BSRow class="my-2">
                <BSCol>
                    <BSCard CardType="CardType.Card">
                        <BSCard CardType="CardType.Body">
                            <BSCard CardType="CardType.Title">
                                Data
                            </BSCard>
                            <BSCard CardType="CardType.Text">
                                <BSRow>
                                    <BSCol>
                                        @foreach (var (key, value) in State.LastValue.Data ?? new Dictionary<string, byte[]>())
                                        {
                                            <BSRow>
                                                <BSCol>
                                                    <BSCard CardType="CardType.Card">
                                                        <BSCard CardType="CardType.Body">
                                                            <BSCard CardType="CardType.Title">
                                                                @key
                                                            </BSCard>
                                                            <BSCard CardType="CardType.Text">
                                                                <pre><code>@Encoding.UTF8.GetString(value, 0, value.Length)</code></pre>
                                                            </BSCard>
                                                        </BSCard>
                                                    </BSCard>
                                                </BSCol>
                                            </BSRow>
                                        }
                                    </BSCol>
                                </BSRow>
                            </BSCard>
                        </BSCard>
                    </BSCard>
                </BSCol>
            </BSRow>
        }
        @if (State.LastValue.StringData != null)
        {
            <BSRow class="my-2">
                <BSCol>
                    <BSCard CardType="CardType.Card">
                        <BSCard CardType="CardType.Body">
                            <BSCard CardType="CardType.Title">
                                StringData
                            </BSCard>
                            <BSCard CardType="CardType.Text">
                                <BSRow>
                                    <BSCol>
                                        @foreach (var (key, value) in State.LastValue.StringData ?? new Dictionary<string, string>())
                                        {
                                            <BSRow>
                                                <BSCol>
                                                    <BSCard CardType="CardType.Card">
                                                        <BSCard CardType="CardType.Body">
                                                            <BSCard CardType="CardType.Title">
                                                                @key
                                                            </BSCard>
                                                            <BSCard CardType="CardType.Text">
                                                                <pre><code>@value</code></pre>
                                                            </BSCard>
                                                        </BSCard>
                                                    </BSCard>
                                                </BSCol>
                                            </BSRow>
                                        }
                                    </BSCol>
                                </BSRow>
                            </BSCard>
                        </BSCard>
                    </BSCard>
                </BSCol>
            </BSRow>
        }
    </Specifications>
</EntityDetailsView>

@code
{
    protected override void OnInitialized()
    {
        ParentPageName = "Secrets";
        base.OnInitialized();
    }
}