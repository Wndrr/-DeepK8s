@using Desktop.Services.StateContainers
@using k8s.Models
@using Desktop.Services
@inject PodStateContainer PodStateContainer
@inject PodSelectionPredicateHelper PodSelectionPredicateHelper

@if (Entity == null || PodStateContainer == null)
{
}

else
{
    <PodReferenceList Filter="@Selector"/>
}

@code {
    private Func<KeyValuePair<string, V1Pod>, bool> Selector => pod =>
        PodSelectionPredicateHelper.PodHasMatchingNamespace(pod.Value, Entity.Metadata)
        && PodSelectionPredicateHelper.PodHasMatchingLabels(pod.Value, Entity.Spec);

    [Parameter]
    public V1Service Entity { get; set; }

}